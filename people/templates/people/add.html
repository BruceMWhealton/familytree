{% extends "people/base.html" %}
{% load static %}
{% block title %}Add Person{% endblock %}
{% block head %}
  {{ form.media }}
{% endblock %}

{% block content %}
  <h1 class="page-header">Add Person</h1>
  <div class="row">
    <div class="col-md-12">
      {% if form.non_field_errors %}
        <div class="alert alert-danger">
          {% for error in form.non_field_errors %}
            {{ error }}<br/>
          {% endfor %}
        </div>
      {% endif %}
      <form method="post" role="form">
        {% csrf_token %}
        <div class="well">
          <fieldset>
            <div class="row">
              <div class="form-group col-md-6{% if form.gender.errors %} has-error{% endif %}">
                <label class="control-label sr-only">{{ form.gender.label }}</label>
                {% for radio in form.gender %}
                  <div class="radio-inline">
                    {{ radio.tag }} {{ radio.choice_label }}
                  </div>
                {% endfor %}
              </div>
              <div class="form-group col-md-6 text-right">
                <div class="checkbox-inline">
                  {{ form.blood_relative }} {{ form.blood_relative.label }}
                </div>
                <div class="checkbox-inline">
                  {{ form.deceased }} {{ form.deceased.label }}
                </div>
              </div>
            </div>
          </fieldset>
          <fieldset>
            <legend>Name</legend>
            <div class="row">
              <div class="form-group col-md-3{% if form.forename.errors %} has-error{% endif %}">
                <label class="control-label sr-only">{{ form.forename.label }}</label>
                {{ form.forename }}
              </div>
              <div class="form-group col-md-5{% if form.middle_names.errors %} has-error{% endif %}">
                <label class="control-label sr-only">{{ form.middle_names.label }}</label>
                {{ form.middle_names }}
              </div>
              <div class="form-group col-md-4{% if form.surname.errors %} has-error{% endif %}">
                <label class="control-label sr-only">{{ form.surname.label }}</label>
                {{ form.surname }}
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-3{% if form.known_as.errors %} has-error{% endif %}">
                <label class="control-label sr-only">{{ form.known_as.label }}</label>
                {{ form.known_as }}
              </div>
              <div class="form-group col-md-4 col-md-offset-5{% if form.maiden_name.errors %} has-error{% endif %}">
                <label class="control-label sr-only">{{ form.maiden_name.label }}</label>
                {{ form.maiden_name }}
              </div>
            </div>
          </fieldset>
        </div>
        <div class="well">
          <fieldset>
            <legend>Parents</legend>
            <div class="row">
              <div class="form-group col-md-6">
                <label class="control-label sr-only">{{ form.mother.label }}</label>
                {{ form.mother }}
              </div>
              <div class="form-group col-md-6">
                <label class="control-label sr-only">{{ form.father.label }}</label>
                {{ form.father }}
              </div>
            </div>
            <script>
              $(document).ready(function(){
                $('#id_mother').select2({templateResult: template,
                                         templateSelection: template,
                                         escapeMarkup: function(m){return m;},
                                         placeholder: 'Mother',
                                         theme: 'bootstrap'});
                $('#id_father').select2({templateResult: template,
                                         templateSelection: template,
                                         escapeMarkup: function(m){return m;},
                                         placeholder: 'Father',
                                         theme: 'bootstrap'});
              });
            </script>
          </fieldset>
        </div>
        <div class="well">
          <fieldset>
            <legend>Notes</legend>
            {{ form.notes }}
          </fieldset>
        </div>
        <div class="text-right">
          <button type="reset" class="btn btn-default">Reset</button>
          <button type="submit" class="btn btn-primary">Add Person</button>
        </div>
      </form>
    </div>
  </div>
{% endblock %}


